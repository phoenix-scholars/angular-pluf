# کاربر

همواره یک کاربر به عنوان کاربر اصلی و جاری در نظر گرفته می‌شود.

سطح دسترسی‌ها و تولید درخواست و نتایج به دست آمده نیز همواره بر اساس یک کاربر تعیین می‌شود.

مجموعه‌ای از کلاس‌ها و سرویس‌ها برای کار با کاربران ایجاد شده است.

حتی اگر شما به عنوان یک کاربر در سیستم وارد نشده باشید باز هم یک کاربر جاری در نظر گرفته می‌شود با این تفاوت که هویتی در سیستم برای شما وجود ندارد.

## سرویس کاربر

$usr یک سرویس کلی در سیستم برای کار با کاربر جاری در نظر گرفته شده است.

### کاربر جاری

کاربر جاری به صورت زیر تعیین می‌شود:

	$usr.session().then(function(user){
		// User is current
	})

### ورود به سیستم

یک کاربر می‌تواند در صورتی که هویتی در سیستم ندارد، به سیستم وارد شده و خود را به عنوان یک کاربر دارای هویت معرفی کند.

برای ورود به سیستم فراخوانی زیر در نظر گرفته شده است:

	$usr.login(user, password).then(function(user){
		// user
	}, function(exception){
		// Fail to login
	})

دستور معادل با این فراخوانی به صورت زیر تعریف می‌شود:

	Command ID: pluf.user.login
	Parameters: { username: [user name], password:[password]}

### خروج از سیستم

فراخوانی زیر برای خروج از سیستم در نظر گرفته شده است.

	$usr.logout().then(function(user){
		// Anonymous user
	})

دستور معادل با این فراخوانی به صورت زیر تعریف می‌شود:

	Command ID: pluf.user.logout

### ثبت کاربر

ثبت کاربر می‌تواند به روش‌های متفاوتی انجام شود. در حال حاضر تنها یک روش برای ثبت کاربر در سیستم در نظر گرفته شده که در آن اطلاعات کامل یک کاربر دریافت شده و در سیستم ثبت می‌شود.

پس از ثبت کاربر ممکن است که کاربر نیاز به فعال سازی داشته باشد، از این رو حالت کاربر به صورت غیر فعال خواهد بود تا زمانی که فرآیند فعال سازی حساب کاربری را انجام دهد.

در حال کلی فراخوانی زیر برای ثبت کاربر در نظر گرفته شده است:

	$usr.signup(userData).then(function(user){
		// New user
	})

اطلاعات زیر برای اینجاد یک کاربر مورد نیاز است:

- login
- first_name
- last_name
- language
- password
- email

### جستجوی کاربران

در بسیاری از کاربردها، مثلا اضافه کردن یک کاربر به فهرست کاربران مجاز، نیاز به جستجو و انتخاب یک کاربر خاص است. 

یک فراخوانی برای جستجو کاربران در نظر گرفته شده که به صورت زیر است:

	var p = new PaginatorParameter();
	$usr.users(p).then(function(users){
		// Users is a paginated list
	})

### اطلاعات یک کاربر

برای گرفتن اطلاعات یک کاربر نام کاربری آن مورد نیاز است. 

فراخوانی زیر اطلاعات کاربر را بر اساس نام آن تعیین می‌کند.

	$usr.user(login).then(function(user){
		// Selected user
	})

## PUser

این نوع کلاس برای کار با داده‌های کاربران ایجاد شده است.

تقریبا تمام فراخوانی‌هایی که برای این کلاس در نظر گرفته شده برای کاربر جاری قابل دسترس است و استفاده از آن برای سایر کاربران با خطا روبرو خواهد شد.

### به روز رسانی یک خصوصیت

این فراخوانی تنها برای کاربر جاری ممکن است.

برای به روز کردن یک خصوصیت از کاربر باید نام خصوصیت و مقدار آن مشخص باشد. برای این کار فراخوانی زیر در نظر گرفته شده است:

	user.update(key, value).then(function(updatedUser){
		// Updated user
	})

نکته اینکه خود شئی که فراخوانی به روز رسانی روی ان انجام شده نیز به روز می‌شود اما با این وجود به عنوان خروجی این فراخوانی نیز در نظر گرفته می‌شود.

### به روز رسانی کلی کاربر

این فراخوانی تنها برای خود کاربر ممکن است.

یک راه ساده به روز کردن اطلاعات کاربر و در نهایت ذخیره آن است. این کار با استفاده از فراخوانی زیر انجام می‌شود:

	user.update().then(function(updatedUser){
		// Updated user
	});

### گرفتن پروفایل کاربری

امکان گرفتن پروفایل کاربر تنها برای کاربران مجاز است.

فراخوانی زیر برای این کار در نظر گرفته شده است:

	user.profile().then(function(profile){
		// User profile
	})

## PProfile

هر کاربر یک پروفایل مخصوص به خود دارد که اطلاعات خاص کاربر را تعیین می‌کند.

### به روز کردن خصوصیت

فراخوانی زیر برای به روز کردن یک خصوصیت از پروفایل در نظر گرفته شده است:

	profile.update(key, value).then(function(profile){
		// Updated profile
	})

روش دیگر به روز کردن کردن تغییر تمام خصوصیت‌های مورد نظر و بعد ذخیره کردن آن است:

	profile.update().then(function(profile){
		// Updated profile
	})


