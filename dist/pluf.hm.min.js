/*! angular-pluf 2016-05-23 */
"use strict";angular.module("pluf.hm",["pluf","pluf.saas"]).factory("HMPart",function(PObject){var hMPart=function(){PObject.apply(this,arguments)};return hMPart.prototype=new PObject,hMPart}).factory("HMPayment",function(PObject){var hMPayment=function(){PObject.apply(this,arguments)};return hMPayment.prototype=new PObject,hMPayment}).factory("HMMessage",function(PObject){var hMMessage=function(){PObject.apply(this,arguments)};return hMMessage.prototype=new PObject,hMMessage}).factory("HMTenant",function($http,PException,PaginatorPage,PaginatorParameter,PTenant,HMPart,HMMessage){var hMTenant=function(){PTenant.apply(this,arguments),this._message=[],this._part=[]};return hMTenant.prototype=new PTenant,hMTenant.prototype.retMsg=function(d){if(d.id in this._message){var t=this._message[d.id];return t.setData(d),t}var t=new HMMessage(d);return this._message[t.id]=t,t},hMTenant.prototype.retPart=function(d){if(d.id in this._part){var t=this._part[d.id];return t.setData(d),t}var t=new HMPart(d);return this._part[t.id]=t,t},hMTenant.prototype.messages=function(param){param||(param=new PaginatorParameter);var scope=this;return $http({method:"GET",url:"/api/hm/"+this.id+"/message/list",params:param.getParameter()}).then(function(res){var page=new PaginatorPage(res.data);page.items=[];for(var i=0;i<page.counts;i++){var t=scope.retMsg(res.data.items[i]);page.items.push(t)}return page},function(data){throw new PException(data)})},hMTenant.prototype.parts=function(param){param||(param=new PaginatorParameter);var scope=this;return $http({method:"GET",url:"/api/hm/"+this.id+"/part/list",params:param.getParameter()}).then(function(res){var page=new PaginatorPage(res.data);page.items=[];for(var i=0;i<page.counts;i++){var t=scope.retPart(res.data.items[i]);page.items.push(t)}return page},function(data){throw new PException(data)})},hMTenant}).service("$hm",function($tenant,HMTenant){angular.extend(this,$tenant),this.ret=function(d){if(d.id in this._tenant){var t=this._tenant[d.id];return t.setData(d),t}var t=new HMTenant(d);return this._tenant[t.id]=t,t}});